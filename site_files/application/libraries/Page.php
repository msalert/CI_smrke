<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); class Page{	private $data;		//getter / setters	public function title(){		if(func_num_args()==0) return $this->data['title'];		else $this->data['title'] = func_get_arg(0);	 }		public function template(){		if(func_num_args()==0) return $this->data['template'];		else $this->data['template'] = func_get_arg(0);	 }		 public function description(){	 	if(func_num_args()==0) return $this->data['description'];		else $this->data['description'] = func_get_arg(0); 		 }	 public function Data(){ //args(array) or Data(key, value);	 	if(func_num_args()==0) return $this->data;		else if(func_num_args()==1)	{ $t=func_get_arg(0); $this->data=array_merge($this->data,$t);}		else if(func_num_args()==2) $this->data[func_get_arg(0)]=func_get_arg(1);	 }	 // public function custom_js_vars(){	 	// if(func_num_args()==0) return $this->data['custom_js_vars'];		// else $this->data['custom_js_vars'][func_get_arg(0)]=func_get_arg(1);	 // }	 public function scripts(){ // args scripts(script1, script2, 'script3', ...')	 	$n=func_num_args();	 	if($n==0){			 return $this->data['scripts'];		}else{			for ($i=0; $i < $n; $i++) { 				$script = func_get_arg($i);				array_push($this->data['scripts'],$script);			}		}	 }	 	 public function e_scripts(){ // args e_scripts(script1, script2, 'script3', ...')	 	$n=func_num_args();	 	if($n==0){			 return $this->data['e_scripts'];		}else{			for ($i=0; $i < $n; $i++) { 				$script = func_get_arg($i);				array_push($this->data['e_scripts'],$script);			}		}	 }		 public function styles(){	 	$n=func_num_args();	 	if($n==0){			 return $this->data['styles'];		}else{			for ($i=0; $i < $n; $i++) { 				$style = func_get_arg($i);				array_push($this->data['styles'],$style);			}		}	 }	 public function e_styles(){ // args e_scripts(script1, script2, 'script3', ...')	 	$n=func_num_args();	 	if($n==0){			 return $this->data['e_styles'];		}else{			for ($i=0; $i < $n; $i++) { 				$script = func_get_arg($i);				array_push($this->data['e_styles'],$script);			}		}	 }	 public function debug($item){ //args debug(item), debug(array), object, etc.	 	echo "<pre>".print_r($item,true)."</pre>";	 	// if(func_num_args()==0){			 // return $this->data['debug'];		// }else{			// $item = func_get_arg(0);			// array_push($this->data['debug'],$item); 			// }	 }	 public function content(){		if(func_num_args()==0) return $this->data['content'];		else $this->data['content'] = func_get_arg(0); 		 }     function __construct($name=false, $create=false) {     			     	//take in name and set defaults, create		$this->data=array(			'title'=> $name? $this->clean_title($name):'Default ',			// 'title'=> $name? ucfirst(str_replace("_", " ", $name)):'Default ',			'description' => " ",			'template' => 'template',			'scripts' => array(),			'e_scripts' => array(),			'styles' => array(),			'e_styles' => array(),			'p'=> $name,			'debug' => array(),			'content' => $name? $name."-v":""		);		if($create){                    if($create===true) $create = '';                    switch($create){                        case 'old':                            $handle = fopen("_/js/".$name.".js","a+"); fclose($handle);                            $handle = fopen("_/css/".$name.".css","a+"); fclose($handle);			                            $handle = fopen("application/views/".$name."-v.php","a+"); fclose($handle);                            if(false){                                    $handle = fopen("application/controllers/".$name.".php","a+");                                    $content = "<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');\n\n\n";                                    $content .= "class ".ucfirst($name)." extends MY_Controller{\n\n\tpublic function index(){";                                    $content .= "\n\t\t\$page = new Page('".$name."');";                                    $content .= "\n\t\t\$page->show(\$this);\n\t}\n\n}";                                    fwrite($handle, $content);				                                    fclose($handle);                            }                            break;                        default: // only create view                            $handle = fopen("application/views/".$name."-v.php","a+"); fclose($handle);                            break;                    }					}	     }	 	 public function show($template=false) {		$template = $template? $template : $this->data['template'];		$ci = &get_instance();                $this->data['system_message'] = $ci->session->userdata('system_message');		$ci->load->view($template,$this->data);	 }	 	 	 // return filename to capitalized text	 private function clean_title($input){	 	$input = preg_replace('/^(\w)|_(\w)/e', ' strtoupper("$0")', $input);	 	return preg_replace('/_/', ' ', $input);	 } }